# =========================================================
# MPV – OPTIMIZED CONFIG for Intel HD 620 (Wayland)
# =========================================================

# --- GENERAL ---
save-position-on-quit=yes
resume-playback-check-duration=300

# --- VIDEO OUTPUT & HARDWARE ACCELERATION ---
# Use standard GPU output (stable)
vo=gpu
# Wayland context
gpu-api=auto
gpu-context=wayland

# Hardware decoding (VAAPI) — efficient Intel acceleration
hwdec=vaapi
hwdec-codecs=all

# Sync video to display
video-sync=display-resample
interpolation=no

# Reduce CPU load / battery use
profile=default

# --- SCALING (balanced quality / performance) ---
scale=lanczos
cscale=spline36
dscale=mitchell
correct-downscaling=yes

# --- OSD / OSC ---
osd-bar=no
osc=no
border=no
cursor-autohide-fs-only=yes
cursor-autohide=300
osd-level=1
osd-duration=1000
hr-seek=yes

# Optional font settings (keep if you like)
osd-font="Verdana"
osd-font-size=20
osd-color="#FFFFFF"
osd-border-color="#000000"
osd-border-size=0.6

# --- LANGUAGE PRIORITY ---
alang=ja,jpn,en,eng
slang=en,eng

# --- AUDIO ---
volume=100
volume-max=200
audio-pitch-correction=yes

# --- SUBTITLES ---
demuxer-mkv-subtitle-preroll=yes
sub-auto=all
sub-font="Netflix Sans Medium"
sub-font-size=40
sub-color="#FFFFFFFF"
sub-border-color="#FF000000"
sub-border-size=2.0

# --- SCREENSHOTS ---
screenshot-format=png
screenshot-high-bit-depth=yes
screenshot-png-compression=1
screenshot-directory="~/Pictures/mpv-screenshots"
screenshot-template="%f-%wH.%wM.%wS.%wT-#%#00n"

# --- CACHE (better with hardware decoding) ---
cache=yes
cache-on-disk=no
demuxer-max-bytes=200MiB
demuxer-readahead-secs=60
demuxer-max-back-bytes=50MiB

# --- OPTIONAL PROFILES (uncomment to use) ---
# For battery saver
#[battery]
#profile-desc=Battery saver
#scale=bilinear
#cscale=bilinear
#deband=no

# For light debanding on WEB-DL anime
#[WEB-DL]
#profile-desc=WEB-DL Anime
#profile-cond=string.match(p.filename,"HatSubs")~=nil or string.match(p.filename,"SubsPlease")~=nil
#deband=yes

